<html>
    <body>
        <script>
            window.onload = function() {
              if (window.exist) {
                alert(window.exist);
              }
            };
            function printLine(str, size, sep = ":", space = null) {
              size = space ? space : size;
              let length = str.length;
              let [first, second] = str.split(":", 2);
              let line = first + (sep == ":" ? sep : '');
              for (let i = 1; i < (size - length); i++) {
                  line += ' ';
              }
              line += (sep != ':' ? sep : '') + second;
              return line;
            }
            function sendToQuickPrinter(){
                const quantity = '1212.00';
                const price = '151.00';
                const total = '18023.00';
                var text = "<CENTER><BIG>Mon Quotidien<BR><NORMAL><SMALL><LEFT>tel: 05 24 34 65 61<BR>Num Ref SALE/POS/5678654<BR>Date: 10/12/2023 16:45<BR><BR><BR><BR>Mille F. Vanille<BR>"+printLine('   '+quantity+' x '+price+': '+total,32,' ')+"<BR><LINE><LEFT>TOTAL<RIGHT>180.00<BR><BR><CUT>";
                //var textEncoded = encodeURI(text);
                if (window.exist) {
                            //if(JSON.parse(window.ReactNativeWebView.injectedObjectJson()).isMobilePrinter){
                            alert(window.exist);
                }

                //window.ReactNativeWebView.postMessage(text);
                
                /*
                try {
                  window.location.href = "quickprinter://" + textEncoded;
                } catch (error) {
                  console.error('Error setting window location:', error);
                  // Redirect to home page
                  window.location.href = "/";
                }*/
            }
        </script>
        <div style="display:flex;">
        <button style="padding:200px 200px 200px 200px;" onclick="sendToQuickPrinter();">Print demo app</button>
            </div>
    </body>
</html>
